<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chinchilla Design — Creative Studio | Digital Fabrication & Design in Vancouver</title>
  <meta name="description" content="Chinchilla Design is a multidisciplinary creative studio in Vancouver specializing in digital fabrication, CNC woodworking, interior design, and brand identity. Where craftsmanship meets technology.">
  <meta name="keywords" content="digital fabrication, CNC woodworking, interior design, brand identity, creative studio, Vancouver, parametric design, wood art, architectural installations">
  <meta name="author" content="Chinchilla Design">
  <link rel="canonical" href="https://chinchilla.design/">

  <!-- Open Graph (Facebook, LinkedIn, iMessage) -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Chinchilla Design — Creative Studio">
  <meta property="og:description" content="A multidisciplinary creative studio in Vancouver specializing in digital fabrication, CNC woodworking, interior design, and brand identity.">
  <meta property="og:url" content="https://chinchilla.design/">
  <meta property="og:image" content="https://chinchilla.design/images/ids-pavilion/IDS%20Pavilion.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:alt" content="Chinchilla Design — IDS Pavilion project">
  <meta property="og:site_name" content="Chinchilla Design">
  <meta property="og:locale" content="en_CA">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Chinchilla Design — Creative Studio">
  <meta name="twitter:description" content="A multidisciplinary creative studio in Vancouver specializing in digital fabrication, CNC woodworking, interior design, and brand identity.">
  <meta name="twitter:image" content="https://chinchilla.design/images/ids-pavilion/IDS%20Pavilion.jpg">

  <!-- Favicon (black circle SVG) -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='black'/></svg>">
  <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><circle cx='50' cy='50' r='50' fill='black'/></svg>">

  <meta name="theme-color" content="#0A0A0A">
  <link rel="dns-prefetch" href="https://cdnjs.cloudflare.com">

  <!-- Geo & Business -->
  <meta name="geo.region" content="CA-BC">
  <meta name="geo.placename" content="North Vancouver">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --white: #0A0A0A;
      --black: #FFFFFF;
      --gray: #ADADAD;
      --gray-light: #909090;
      --border: rgba(255, 255, 255, 0.1);
      --footer-bg: #1A1A1A;
      --ease-premium: cubic-bezier(0.16, 1, 0.3, 1);
    }

    html {
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: var(--white);
      color: var(--black);
      cursor: none;
      overflow-x: hidden;
    }

    a, button {
      cursor: none;
    }

    /* Parallax Dot Grid */
    #dotGrid {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      pointer-events: none;
    }

    /* Ensure all content sits above the dot grid */
    .hero, .marquee-section, .intro,
    .projects, .modal, .about, .contact, footer {
      position: relative;
      z-index: 1;
    }

    /* Custom Cursor */
    .cursor {
      position: fixed;
      width: 32px;
      height: 32px;
      border: 1px solid #FFFFFF;
      background: #FFFFFF;
      border-radius: 50%;
      pointer-events: none;
      z-index: 9999;
      mix-blend-mode: difference;
      transform: translate(-50%, -50%);
      transition: transform 0.5s var(--ease-premium);
    }

    .cursor.hover {
      transform: translate(-50%, -50%) scale(2.5);
    }

    /* Staggered Menu */
    .staggered-toggle {
      position: fixed;
      top: 24px;
      right: 24px;
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 20px;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1.5px solid #444;
      border-radius: 999px;
      color: var(--black);
      font-family: 'Inter', sans-serif;
      font-weight: 600;
      font-size: 14px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      z-index: 201;
      transition: background 0.3s ease;
    }

    .staggered-toggle:hover {
      background: rgba(0, 0, 0, 0.75);
    }

    .staggered-toggle-label {
      position: relative;
      overflow: hidden;
      width: 50px;
      height: 18px;
    }

    .staggered-toggle-label span {
      display: block;
      position: absolute;
      left: 0;
      width: 100%;
      text-align: center;
      transition: transform 0.4s var(--ease-premium);
    }

    .staggered-toggle-label .label-menu {
      transform: translateY(0);
    }

    .staggered-toggle-label .label-close {
      transform: translateY(120%);
    }

    .staggered-toggle.open .staggered-toggle-label .label-menu {
      transform: translateY(-120%);
    }

    .staggered-toggle.open .staggered-toggle-label .label-close {
      transform: translateY(0);
    }

    .staggered-toggle-icon {
      position: relative;
      width: 18px;
      height: 18px;
    }

    .staggered-toggle-icon .bar {
      position: absolute;
      top: calc(50% - 1px);
      left: 0;
      width: 18px;
      height: 2px;
      background: var(--black);
      border-radius: 1px;
      transform-origin: center center;
    }

    /* .bar-v rotation handled by GSAP */

    .staggered-prelayer {
      position: fixed;
      top: 0;
      right: 0;
      width: 100vw;
      height: 100%;
      z-index: 190;
      pointer-events: none;
    }

    .staggered-prelayer-1 {
      background: #FFFFFF;
      z-index: 190;
    }

    .staggered-prelayer-2 {
      background: #ADADAD;
      z-index: 191;
    }

    .staggered-panel {
      position: fixed;
      top: 0;
      right: 0;
      width: 100vw;
      height: 100%;
      background: var(--white);
      z-index: 192;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 80px 48px 48px;
      pointer-events: none;
      overflow-y: auto;
    }

    .staggered-panel.open {
      pointer-events: auto;
    }

    .staggered-items {
      flex: 1;
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 24px;
    }

    .staggered-item {
      display: flex;
      align-items: baseline;
      gap: 20px;
      text-decoration: none;
      color: var(--black);
      overflow: hidden;
    }

    .staggered-item-number {
      font-family: monospace;
      font-size: 14px;
      color: var(--gray);
      letter-spacing: 0.05em;
      flex-shrink: 0;
      padding-bottom: 0.15em;
    }

    .staggered-item-label {
      font-size: clamp(32px, 5vw, 48px);
      font-weight: 700;
      letter-spacing: -0.03em;
      text-transform: uppercase;
      line-height: 1.3;
      display: inline-block;
      transform-origin: left bottom;
      transition: color 0.3s ease;
    }

    .staggered-item:hover .staggered-item-label {
      color: var(--gray);
    }

    .staggered-item--has-sub {
      display: block;
      cursor: pointer;
    }

    .staggered-item--has-sub .staggered-item-number,
    .staggered-item--has-sub .staggered-item-label {
      display: inline;
      vertical-align: baseline;
    }

    .staggered-item--has-sub .staggered-item-number {
      margin-right: 20px;
    }

    .staggered-sub {
      display: flex;
      flex-direction: column;
      gap: 8px;
      padding-left: 34px;
      max-height: 0;
      overflow: hidden;
      opacity: 0;
      transition: max-height 0.4s var(--ease-premium), opacity 0.3s ease;
    }

    .staggered-item--has-sub:hover .staggered-sub {
      max-height: 200px;
      opacity: 1;
      padding-top: 12px;
    }

    .staggered-sub-link {
      font-size: 16px;
      font-weight: 500;
      letter-spacing: -0.01em;
      color: var(--gray);
      text-decoration: none;
      transition: color 0.3s ease;
      padding: 4px 0;
    }

    .staggered-sub-link:hover {
      color: var(--black);
    }

    .staggered-socials {
      display: flex;
      gap: 32px;
      padding-top: 40px;
      border-top: 1px solid var(--border);
      margin-top: auto;
    }

    .staggered-social-link {
      font-size: 14px;
      font-weight: 500;
      letter-spacing: 0.04em;
      text-transform: uppercase;
      text-decoration: none;
      color: var(--gray);
      transition: color 0.3s ease;
      opacity: 0;
    }

    .staggered-social-link:hover {
      color: var(--black);
    }

    @media (min-width: 769px) {
      .staggered-prelayer,
      .staggered-panel {
        width: 40vw;
      }
    }

    @media (max-width: 640px) {
      .staggered-toggle {
        top: 16px;
        right: 16px;
        padding: 10px 16px;
        gap: 10px;
        font-size: 13px;
      }

      .staggered-panel {
        padding: 80px 24px 32px;
      }

      .staggered-item-label {
        font-size: clamp(36px, 10vw, 52px);
      }

      .marquee-card {
        width: 200px;
      }

      .marquee-track {
        gap: 16px;
      }
    }

    /* Hero Section */
    .hero {
      min-height: 70vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 100px 32px 20px;
    }

    .hero-title {
      font-size: clamp(48px, 10vw, 160px);
      font-weight: 700;
      letter-spacing: -0.05em;
      line-height: 1;
    }

    .hero-title .line {
      display: inline;
      overflow: hidden;
      padding-bottom: 0.2em;
      margin-bottom: -0.2em;
    }

    .hero-title .line-space {
      display: inline;
    }

    .hero-title .char {
      display: inline-block;
      transform: translateY(100%);
      animation: slideUp 1s var(--ease-premium) forwards;
    }

    @keyframes slideUp {
      to {
        transform: translateY(0);
      }
    }


    .hero-subtitle {
      font-size: clamp(16px, 2vw, 24px);
      font-weight: 400;
      letter-spacing: -0.02em;
      color: var(--gray);
      margin-top: 32px;
      opacity: 0;
      transform: translateY(20px);
      animation: fadeUp 1s var(--ease-premium) 0.8s forwards;
    }

    @keyframes fadeUp {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Marquee Section */
    .marquee-section {
      padding: 20px 0;
      overflow: hidden;
    }

    .marquee-container {
      display: flex;
      width: max-content;
      animation: marquee 30s linear infinite;
    }

    .marquee-section:hover .marquee-container {
      animation-play-state: paused;
    }

    @keyframes marquee {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(-50%);
      }
    }

    .marquee-track {
      display: flex;
      gap: 24px;
      padding: 0 12px;
    }

    .marquee-card {
      width: 280px;
      aspect-ratio: 5/7;
      overflow: hidden;
      flex-shrink: 0;
      position: relative;
    }

    .marquee-card:nth-child(3n+1) {
      border-top-left-radius: 100px;
    }

    .marquee-card:nth-child(3n+2) {
      border-top-right-radius: 100px;
      border-bottom-left-radius: 40px;
    }

    .marquee-card:nth-child(3n) {
      border-radius: 40px;
    }

    .marquee-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: grayscale(100%);
      transition: filter 0.7s var(--ease-premium), transform 0.7s var(--ease-premium);
    }

    .marquee-card:hover img {
      filter: grayscale(0%);
      transform: scale(1.05);
    }

    /* Intro Statement */
    .intro {
      max-width: 900px;
      margin: 0 auto;
      padding: 120px 48px;
      text-align: center;
    }

    .intro-text {
      font-size: clamp(24px, 4vw, 48px);
      font-weight: 500;
      letter-spacing: -0.03em;
      line-height: 1.3;
    }

    .intro-text .highlight {
      background: linear-gradient(to bottom, #555555, #888888);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* ── Ball-pit Projects ── */
    .projects {
      padding: 260px 0 0;
      position: relative;
      z-index: 2;
      overflow: visible; /* allow balls to fly above the section */
    }

    /* Pill-shaped info bar below ball-pit — expands downward on hover */
    .projects-bar-wrap {
      padding: 20px 24px 120px;
      position: relative;
      pointer-events: none; /* never block bubble clicks */
    }

    .projects-bottom {
      position: relative;
      display: flex;
      flex-direction: column;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border: 1.5px solid #444;
      border-radius: 999px;
      height: 44px;
      overflow: hidden;
      width: 100%;
      pointer-events: none; /* decorative only */
      transition: height 0.4s cubic-bezier(0.16, 1, 0.3, 1);
    }

    /* "Projects" label shown at rest */
    .projects-bottom::before {
      content: 'Projects';
      position: absolute;
      inset: 0 0 auto 0;
      height: 44px;
      display: flex;
      align-items: center;
      padding: 0 32px;
      font-family: 'Inter', sans-serif;
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      color: #ffffff;
      transition: opacity 0.2s ease;
      pointer-events: none;
    }

    /* Fade label out when a bubble is hovered */
    .projects.hovered .projects-bottom::before {
      opacity: 0;
    }

    /* Content inside the pill — revealed as pill expands */
    .projects-hover-panel {
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 12px 32px 16px;
      gap: 6px;
      opacity: 0;
      transition: opacity 0.2s ease 0.15s;
    }

    .projects.hovered .projects-hover-panel {
      opacity: 1;
    }

    .projects-hover-title {
      font-family: 'Inter', sans-serif;
      font-size: clamp(16px, 1.8vw, 24px);
      font-weight: 700;
      letter-spacing: -0.04em;
      color: #fff;
      line-height: 1;
      display: block;
    }

    .projects-hover-desc {
      font-family: monospace;
      font-size: 11px;
      letter-spacing: 0.05em;
      color: rgba(255, 255, 255, 0.65);
      line-height: 1.5;
      margin: 0;
    }

    #ball-pit {
      position: relative;
      width: 100%;
      /* no overflow:hidden here — balls start above and fall in */
      cursor: grab;
      min-height: 560px;
    }

    #ball-pit:active { cursor: grabbing; }

    .bubble {
      position: absolute;
      border-radius: 50%;
      cursor: grab;
      overflow: hidden;
      /* physics drives left/top; CSS transitions drive width/height on hover */
      will-change: left, top, width, height;
      box-shadow: 0 8px 40px rgba(0,0,0,0.5);
      user-select: none;
      -webkit-user-select: none;
    }

    .bubble-photo {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: grayscale(80%);
      transition: filter 0.6s ease;
      z-index: 1;
      pointer-events: none;
    }

    /* dark gradient overlay so title is always legible */
    .bubble-title-bg {
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at center, rgba(0,0,0,0.35) 0%, rgba(0,0,0,0.55) 100%);
      z-index: 2;
      pointer-events: none;
      transition: opacity 0.5s ease;
    }

    .bubble-title {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      text-align: center;
      font-size: clamp(14px, 1.8vw, 20px);
      font-weight: 700;
      letter-spacing: -0.02em;
      color: #fff;
      z-index: 3;
      padding: 16px;
      line-height: 1.2;
      transition: opacity 0.35s ease, transform 0.35s ease;
      text-shadow: 0 2px 10px rgba(0,0,0,0.6);
      pointer-events: none;
    }

    .bubble-card {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: flex-end;
      padding: 26px;
      z-index: 4;
      opacity: 0;
      transition: opacity 0.4s ease;
      pointer-events: none;
      background: linear-gradient(to top, rgba(0,0,0,0.72) 0%, rgba(0,0,0,0.0) 55%);
    }

    .bubble-card-title {
      font-size: clamp(16px, 2vw, 24px);
      font-weight: 700;
      letter-spacing: -0.03em;
      color: #fff;
      margin-bottom: 6px;
      text-shadow: 0 2px 8px rgba(0,0,0,0.5);
    }

    .bubble-card-desc {
      font-size: 13px;
      line-height: 1.5;
      color: rgba(255,255,255,0.80);
      text-shadow: 0 1px 4px rgba(0,0,0,0.5);
    }

    .bubble-card-open {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      margin-top: 12px;
      font-family: monospace;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: rgba(255,255,255,0.65);
    }

    /* EXPANDED (hover) — stays circular, grows larger */
    .bubble.expanded {
      z-index: 10;
      box-shadow: 0 20px 70px rgba(0,0,0,0.65);
      /* overflow:hidden inherited from .bubble — circular clip stays on */
    }

    .bubble.expanded .bubble-photo {
      filter: grayscale(0%);
    }

    .bubble.expanded .bubble-title-bg {
      opacity: 0;
    }

    .bubble.expanded .bubble-title {
      opacity: 0;
      transform: scale(0.88);
    }

    /* On hover: card stays hidden — title + desc show in the bottom info bar instead */
    .bubble.expanded .bubble-card {
      opacity: 0;
      pointer-events: none;
    }

    @media (max-width: 768px) {
      #ball-pit { min-height: 820px; }
      .bubble-card-desc { display: none; }
      /* Pill stays visible on mobile — hover expansion disabled but label always shows */
      .projects-bar-wrap { padding-bottom: 40px; }
    }

    .project-summary {
      font-size: 13px;
      line-height: 1.55;
      color: var(--gray-light);
      margin-top: 6px;
      max-width: 36ch;
    }


    /* Footer */
    footer {
      background: rgba(14, 14, 14, 0.92);
      color: #E8E8E8;
      padding: 80px 48px 40px;
    }

    .footer-cta-title {
      font-size: clamp(28px, 5vw, 60px);
      font-weight: 700;
      letter-spacing: -0.04em;
      line-height: 1.0;
      margin-bottom: 40px;
      color: #F0F0F0;
    }

    .footer-cta-btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 16px 36px;
      background: #F97316;
      color: #fff;
      border-radius: 100px;
      font-size: 17px;
      font-weight: 600;
      letter-spacing: -0.02em;
      text-decoration: none;
      width: fit-content;
      transition: background 0.3s ease, transform 0.3s ease;
    }

    .footer-cta-btn:hover {
      background: #ea6c0a;
      transform: scale(1.03);
    }

    .footer-grid {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 60px;
      margin-bottom: 80px;
    }

    @media (max-width: 768px) {
      footer { padding: 60px 24px 40px; }

      /* Contact section: stack calendar above content on mobile */
      .contact-main {
        flex-direction: column;
        gap: 24px;
      }

      /* Calendar slides away on mobile when CTA is active */
      #contact.cta-active .contact-calendar-wrap {
        transform: translateX(300%);
        opacity: 0;
        pointer-events: none;
      }

      .footer-grid {
        grid-template-columns: 1fr;
        gap: 32px;
        margin-bottom: 40px;
      }

      .footer-brand h2 {
        font-size: clamp(22px, 6vw, 32px);
      }
    }

    .footer-brand h2 {
      font-size: clamp(32px, 5vw, 56px);
      font-weight: 700;
      letter-spacing: -0.05em;
      line-height: 0.9;
      margin-bottom: 24px;
    }

    .footer-brand p {
      font-size: 16px;
      font-weight: 400;
      letter-spacing: -0.02em;
      line-height: 1.5;
      color: #C8C8C8;
      max-width: 400px;
    }

    .footer-col h4 {
      font-family: 'Inter', sans-serif;
      font-size: clamp(24px, 3vw, 32px);
      font-weight: 700;
      letter-spacing: -0.03em;
      text-transform: none;
      color: #F0F0F0;
      margin-bottom: 24px;
    }

    .footer-col ul {
      list-style: none;
    }

    .footer-col li {
      margin-bottom: 12px;
    }

    .footer-col a {
      color: #E8E8E8;
      text-decoration: none;
      font-size: 16px;
      font-weight: 400;
      letter-spacing: -0.02em;
      transition: opacity 0.5s var(--ease-premium);
    }

    .footer-col a:hover {
      opacity: 0.6;
    }

    .footer-bottom {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-top: 24px;
      border-top: 1px solid rgba(255, 255, 255, 0.12);
      flex-wrap: wrap;
      gap: 16px;
    }

    .footer-bottom span {
      font-size: 14px;
      color: #A0A0A0;
    }

    /* Calendar */
    .cal-grid {
      display: grid;
      grid-template-columns: repeat(7, 26px);
      gap: 7px;
    }

    .cal-dot {
      width: 26px;
      height: 26px;
      border-radius: 50%;
      transition: transform 0.2s ease;
    }

    .cal-dot:hover { transform: scale(1.35); }

    /* Past days in month */
    .cal-dot.cal-past   { background: #ffffff; }
    /* Today */
    .cal-dot.cal-today  { background: #F97316; }
    /* Future days in month */
    .cal-dot.cal-future { background: rgba(255, 255, 255, 0.25); }
    /* Days outside current month */
    .cal-dot.cal-outside { background: #2d2d2d; }

    /* Mobile: smaller calendar dots — must come after base definitions to win */
    @media (max-width: 768px) {
      .cal-grid {
        grid-template-columns: repeat(7, 10px);
        gap: 4px;
      }
      .cal-dot {
        width: 10px;
        height: 10px;
      }
    }

    /* Project Modal */
    .modal {
      position: fixed;
      inset: 0;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.5s var(--ease-premium), visibility 0.5s var(--ease-premium);
    }

    .modal.active {
      opacity: 1;
      visibility: visible;
    }

    .modal-backdrop {
      position: absolute;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
    }

    /* Right-anchored sliding panel — 100px top/bottom, 12px right gap */
    .modal-frame {
      position: absolute;
      top: 100px;
      right: 12px;
      bottom: 100px;
      width: min(calc(100vw - 72px), 1280px);
      transform: translateX(calc(100% + 40px));
      transition: transform 0.55s var(--ease-premium);
    }

    .modal.active .modal-frame {
      transform: translateX(0);
    }

    /* Inner content: flex row, fills frame height, all corners rounded */
    .modal-content {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: row;
      background: rgba(28, 28, 28, 0.97);
      backdrop-filter: blur(20px);
      -webkit-backdrop-filter: blur(20px);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 24px 80px rgba(0, 0, 0, 0.6);
    }

    /* Close button: child of modal-frame (NOT modal-content), so never clipped */
    .modal-close {
      position: absolute;
      top: 18px;
      right: 18px;
      width: 54px;
      height: 54px;
      background: rgba(0, 0, 0, 0.55);
      border: 1.5px solid rgba(255, 255, 255, 0.55);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10;
      color: #ffffff;
      transition: transform 0.3s var(--ease-premium), background 0.3s ease, border-color 0.3s ease;
    }

    .modal-close:hover {
      background: rgba(0, 0, 0, 0.75);
      border-color: rgba(255, 255, 255, 0.85);
      transform: scale(1.08);
    }

    .modal-close svg {
      width: 26px;
      height: 26px;
    }

    /* Gallery: fills remaining width, full height, images crop to fill */
    .modal-gallery {
      position: relative;
      flex: 1;
      background: #000;
      overflow: hidden;
    }

    /* Images: absolute fill — no letterboxing, no aspect-ratio gaps */
    .modal-gallery-images {
      position: absolute;
      inset: 0;
    }

    .modal-gallery-images img,
    .modal-gallery-images video {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      opacity: 0;
      transition: opacity 0.5s var(--ease-premium);
      cursor: pointer;
    }

    .modal-gallery-images img.active,
    .modal-gallery-images video.active {
      opacity: 1;
    }

    /* Nav: pinned to bottom of info panel */
    .modal-gallery-nav {
      display: flex;
      gap: 14px;
      align-items: center;
      justify-content: center;
      padding: 18px 0;
      border-top: 1px solid var(--border);
    }

    .modal-gallery-btn {
      width: 38px;
      height: 38px;
      background: rgba(255, 255, 255, 0.08);
      border: 1px solid rgba(255, 255, 255, 0.22);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      color: rgba(255, 255, 255, 0.85);
      transition: background 0.25s ease, border-color 0.25s ease;
      flex-shrink: 0;
    }

    .modal-gallery-btn:hover {
      background: rgba(255, 255, 255, 0.18);
      border-color: rgba(255, 255, 255, 0.45);
    }

    .modal-gallery-dots {
      display: flex;
      gap: 6px;
    }

    .modal-gallery-dot {
      width: 7px;
      height: 7px;
      background: rgba(255, 255, 255, 0.3);
      border: none;
      border-radius: 50%;
      transition: background 0.3s ease, transform 0.3s ease;
    }

    .modal-gallery-dot.active {
      background: rgba(255, 255, 255, 0.9);
      transform: scale(1.3);
    }

    /* Info panel: fixed 420px width, flex column — scroll area + sticky footer */
    .modal-info {
      width: 420px;
      flex-shrink: 0;
      height: 100%;
      padding: 0;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    /* Scrollable area: all content above the sticky nav */
    .modal-info-scroll {
      flex: 1 1 0;
      overflow-y: auto;
      padding: 40px 40px 32px;
      scrollbar-width: thin;
      scrollbar-color: rgba(255,255,255,0.2) transparent;
    }

    /* Sticky bottom: nav arrows only */
    .modal-info-footer {
      flex-shrink: 0;
      padding: 0 40px 24px;
    }

    .modal-category {
      font-family: monospace;
      font-size: 12px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--gray);
      margin-bottom: 12px;
    }

    .modal-title {
      font-size: clamp(22px, 3vw, 36px);
      font-weight: 700;
      letter-spacing: -0.03em;
      line-height: 1.1;
      margin-bottom: 24px;
    }

    .modal-description {
      font-size: 15px;
      line-height: 1.7;
      color: var(--gray);
      margin-bottom: 0;
    }

    .modal-details {
      border-top: 1px solid var(--border);
      padding-top: 24px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 24px;
    }

    .modal-detail-item h4 {
      font-family: monospace;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--gray);
      margin-bottom: 6px;
    }

    .modal-detail-item p {
      font-size: 15px;
      font-weight: 500;
      color: var(--black);
    }

    .modal-external-media {
      border-top: 1px solid var(--border);
      padding-top: 24px;
      margin-top: 24px;
      display: none;
    }

    .modal-external-media.has-links {
      display: block;
    }

    .modal-external-media h4 {
      font-family: monospace;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--gray);
      margin-bottom: 12px;
    }

    .modal-external-links {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .modal-external-link {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      font-size: 15px;
      font-weight: 500;
      color: var(--black);
      transition: color 0.3s ease;
    }

    .modal-external-link:hover {
      color: var(--gray);
    }

    .modal-external-link svg {
      width: 16px;
      height: 16px;
    }

    /* Mobile: bottom sheet */
    @media (max-width: 768px) {
      .modal-frame {
        top: auto;
        left: 0;
        right: 0;
        bottom: 0;
        width: 100%;
        height: 90vh;
        transform: translateY(calc(100% + 40px));
      }
      .modal.active .modal-frame {
        transform: translateY(0);
      }
      .modal-content {
        flex-direction: column;
        border-radius: 20px 20px 0 0;
      }
      .modal-gallery {
        flex: none;
        height: 45vh;
      }
      .modal-info {
        width: 100%;
        height: auto;
        flex: 1;
        padding: 0;
        min-height: 0;
      }
      .modal-info-scroll {
        padding: 20px 24px 12px;
      }
      .modal-info-footer {
        padding: 0 24px 24px;
      }
    }

    /* About Section */
    .about {
      padding: 120px 0;
      background: rgba(14, 14, 14, 0.92);
      color: #E8E8E8;
    }

    .about-container {
      position: relative;
      overflow: hidden;
    }

    /* About layout: text left, button right */
    .about-inner {
      display: flex;
      align-items: flex-start;
      gap: 60px;
      padding: 0 48px;
      transition: transform 0.8s var(--ease-premium), opacity 0.6s var(--ease-premium);
    }

    .about-container.show-team .about-inner {
      transform: translateX(-100%);
      opacity: 0;
    }

    .about-text-section {
      flex: 1;
      min-width: 0;
    }

    .about-title {
      font-size: clamp(32px, 5vw, 56px);
      font-weight: 700;
      letter-spacing: -0.03em;
      margin-bottom: 40px;
    }

    .about-paragraphs {
      max-width: 700px;
    }

    .about-paragraphs p {
      font-size: 17px;
      line-height: 1.8;
      color: #C8C8C8;
      margin-bottom: 24px;
    }

    .about-paragraphs p:last-child {
      margin-bottom: 0;
    }

    .team-reveal-wrapper {
      flex-shrink: 0;
      display: flex;
      flex-direction: column-reverse;
      align-items: center;
      gap: 16px;
      align-self: center;
    }

    .team-reveal-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 72px;
      height: 72px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.35);
      border-radius: 50%;
      color: #F0F0F0;
      font-family: 'Inter', sans-serif;
      transition: all 0.5s var(--ease-premium);
    }

    .team-reveal-btn:hover {
      background: rgba(255, 255, 255, 0.25);
      color: #FFFFFF;
      transform: scale(1.05);
    }

    .team-reveal-btn svg {
      width: 32px;
      height: 32px;
      transition: transform 0.5s var(--ease-premium);
    }

    .team-reveal-btn:hover svg {
      transform: translateX(6px);
    }

    .team-reveal-label {
      font-family: 'Inter', sans-serif;
      font-size: clamp(20px, 2.5vw, 28px);
      font-weight: 700;
      letter-spacing: -0.03em;
      color: #F0F0F0;
    }

    /* Team Section */
    .team-section {
      position: absolute;
      inset: 0;
      padding: 0 48px;
      display: flex;
      align-items: center;
      gap: 32px;
      transform: translateX(100%);
      opacity: 0;
      transition: transform 0.8s var(--ease-premium), opacity 0.6s var(--ease-premium);
      pointer-events: none;
    }

    .about-container.show-team .team-section {
      transform: translateX(0);
      opacity: 1;
      pointer-events: auto;
    }

    .team-close-btn {
      flex-shrink: 0;
      width: 72px;
      height: 72px;
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.35);
      border-radius: 50%;
      color: #F0F0F0;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.5s var(--ease-premium);
    }

    .team-close-btn:hover {
      background: rgba(255, 255, 255, 0.25);
      color: #FFFFFF;
      transform: scale(1.05);
    }

    .team-close-btn svg {
      width: 32px;
      height: 32px;
    }

    .team-track {
      display: flex;
      gap: 24px;
      overflow-x: auto;
      padding-bottom: 20px;
      -webkit-overflow-scrolling: touch;
      scrollbar-width: none;
    }

    .team-track::-webkit-scrollbar {
      display: none;
    }

    .team-card {
      width: 340px;
      background: rgba(0, 0, 0, 0.05);
      border-radius: 20px;
      overflow: hidden;
      flex-shrink: 0;
      transform: translateX(80px);
      opacity: 0;
      transition: transform 0.7s var(--ease-premium), opacity 0.5s var(--ease-premium);
    }

    .about-container.show-team .team-card {
      transform: translateX(0);
      opacity: 1;
    }

    .about-container.show-team .team-card:nth-child(1) {
      transition-delay: 0.1s;
    }

    .about-container.show-team .team-card:nth-child(2) {
      transition-delay: 0.2s;
    }

    .team-card:hover {
      transform: translateY(-8px);
    }

    .about-container.show-team .team-card:hover {
      transform: translateY(-8px);
    }

    .team-image {
      width: 100%;
      height: 220px;
    }

    .team-info {
      padding: 28px;
    }

    .team-name {
      font-size: 22px;
      font-weight: 700;
      letter-spacing: -0.02em;
      margin-bottom: 4px;
    }

    .team-role {
      font-family: monospace;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: #A0A0A0;
    }

    .team-bio {
      font-size: 14px;
      line-height: 1.7;
      color: #C8C8C8;
      margin-top: 16px;
    }

    .team-links {
      margin-top: 20px;
      display: flex;
      gap: 16px;
    }

    .team-links a {
      font-size: 13px;
      color: #E8E8E8;
      text-decoration: none;
      opacity: 0.6;
      transition: opacity 0.3s ease;
    }

    .team-links a:hover {
      opacity: 1;
    }

    @media (max-width: 900px) {
      .about-inner {
        flex-direction: column;
        padding: 0 24px;
        gap: 40px;
      }

      .team-reveal-wrapper {
        align-self: center;
      }

      .team-section {
        padding: 0 24px;
        flex-direction: column;
        align-items: flex-start;
      }

      .team-track {
        flex-direction: column;
        overflow-x: visible;
      }

      .team-card {
        width: 100%;
      }

      .team-image {
        height: 180px;
      }
    }

    /* Contact Section */
    .contact {
      padding: 120px 48px;
    }

    /* Flex row: calendar left, sliding content right */
    .contact-main {
      display: flex;
      gap: 60px;
      align-items: stretch;
    }

    /* Calendar wrapper — stays fixed on desktop, slides on mobile */
    .contact-calendar-wrap {
      flex-shrink: 0;
      cursor: pointer;
      padding: 10px;
      border-radius: 14px;
      transition: opacity 0.3s ease, transform 0.85s cubic-bezier(0.16,1,0.3,1);
      user-select: none;
    }

    .contact-calendar-wrap:hover {
      opacity: 0.75;
    }

    /* Clip container for the slide animation */
    .contact-content-wrap {
      flex: 1;
      min-width: 0;
      position: relative;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    /* Default "Get in touch" content — slides right on CTA activation */
    .contact-default {
      transition: transform 0.85s cubic-bezier(0.16,1,0.3,1), opacity 0.6s ease;
    }

    #contact.cta-active .contact-default {
      transform: translateX(110%);
      opacity: 0;
      pointer-events: none;
    }

    /* CTA panel — slides in from left */
    .contact-cta {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding-left: 48px;
      transform: translateX(-100%);
      opacity: 0;
      pointer-events: none;
      transition: transform 0.85s cubic-bezier(0.16,1,0.3,1), opacity 0.6s ease;
    }

    #contact.cta-active .contact-cta {
      transform: translateX(0);
      opacity: 1;
      pointer-events: auto;
    }

    .contact-title {
      font-size: clamp(32px, 5vw, 56px);
      font-weight: 700;
      letter-spacing: -0.03em;
      margin-bottom: 16px;
    }

    .contact-subtitle {
      font-size: clamp(16px, 2vw, 20px);
      font-weight: 400;
      color: var(--gray);
      letter-spacing: -0.02em;
      line-height: 1.5;
      margin-bottom: 32px;
    }

    .contact-email {
      font-size: clamp(20px, 3vw, 32px);
      font-weight: 500;
      color: var(--black);
      text-decoration: none;
      border-bottom: 2px solid var(--border);
      padding-bottom: 4px;
      transition: border-color 0.5s var(--ease-premium);
    }

    .contact-email:hover {
      border-color: var(--black);
    }

    /* Mobile adjustments */
    @media (max-width: 640px) {
      .hero {
        min-height: 50vh;
        padding: 80px 24px 40px;
      }

      .hero {
        align-items: flex-start;
        text-align: left;
      }

      .hero-title {
        font-size: clamp(40px, 12vw, 60px);
      }

      .hero-title .line-space {
        display: none;
      }

      .hero-title .line-chinchilla,
      .hero-title .line-design {
        display: block;
      }

      .intro {
        padding: 60px 24px;
      }

      .projects {
        padding: 60px 24px;
      }

      .about {
        padding: 80px 0;
      }

      .contact {
        padding: 80px 24px;
      }

      footer {
        padding: 60px 24px 32px;
      }

      /* Hide custom cursor on touch devices */
      .cursor {
        display: none;
      }

      body, a, button {
        cursor: auto;
      }
    }
  </style>
  <!-- Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "LocalBusiness",
    "name": "Chinchilla Design",
    "description": "A multidisciplinary creative studio specializing in digital fabrication, CNC woodworking, interior design, and brand identity.",
    "url": "https://chinchilla.design",
    "logo": "https://chinchilla.design/images/logo.png",
    "image": "https://chinchilla.design/images/ids-pavilion/IDS%20Pavilion.jpg",
    "email": "contact@chinchilla.design",
    "address": {
      "@type": "PostalAddress",
      "addressLocality": "North Vancouver",
      "addressRegion": "BC",
      "addressCountry": "CA"
    },
    "areaServed": [
      { "@type": "Country", "name": "Canada" },
      { "@type": "Country", "name": "United States" }
    ],
    "sameAs": [
      "https://instagram.com/benhaywarddesign"
    ],
    "founder": {
      "@type": "Person",
      "name": "Ben Hayward"
    },
    "knowsAbout": ["Digital Fabrication", "CNC Woodworking", "Interior Design", "Brand Identity", "Parametric Design"]
  }
  </script>
</head>
<body>
  <!-- Parallax Dot Grid -->
  <canvas id="dotGrid"></canvas>

  <!-- Custom Cursor -->
  <div class="cursor"></div>

  <!-- Staggered Menu Toggle -->
  <button class="staggered-toggle" id="menuToggle" aria-label="Open menu">
    <div class="staggered-toggle-label">
      <span class="label-menu">Menu</span>
      <span class="label-close">Close</span>
    </div>
    <div class="staggered-toggle-icon">
      <span class="bar bar-h"></span>
      <span class="bar bar-v"></span>
    </div>
  </button>

  <!-- Staggered Menu Pre-layers -->
  <div class="staggered-prelayer staggered-prelayer-1" id="prelayer1"></div>
  <div class="staggered-prelayer staggered-prelayer-2" id="prelayer2"></div>

  <!-- Staggered Menu Panel -->
  <aside class="staggered-panel" id="menuPanel">
    <nav class="staggered-items">
      <div class="staggered-item staggered-item--has-sub" id="workItem">
        <span class="staggered-item-number">01</span>
        <span class="staggered-item-label">Work</span>
        <div class="staggered-sub">
          <a href="#design-build" class="staggered-sub-link" data-nav>Design/Build</a>
          <a href="#product-design" class="staggered-sub-link" data-nav>Product Design</a>
          <a href="#brand-identity" class="staggered-sub-link" data-nav>Brand Identity</a>
        </div>
      </div>
      <div class="staggered-item staggered-item--has-sub" id="studioItem">
        <span class="staggered-item-number">02</span>
        <span class="staggered-item-label">Studio</span>
        <div class="staggered-sub">
          <a href="#about" class="staggered-sub-link" data-nav>About</a>
          <a href="#about" class="staggered-sub-link" data-nav id="menuTeamLink">Team</a>
        </div>
      </div>
      <a href="#contact" class="staggered-item" data-nav>
        <span class="staggered-item-number">03</span>
        <span class="staggered-item-label">Connect</span>
      </a>
    </nav>
    <div class="staggered-socials">
      <a href="https://instagram.com/benhaywarddesign" target="_blank" class="staggered-social-link">Instagram</a>
      <a href="mailto:contact@chinchilla.design" class="staggered-social-link">Email</a>
      <span id="menu-phone" class="staggered-social-link"></span>
    </div>
  </aside>

  <!-- Hero Section -->
  <section class="hero">
    <h1 class="hero-title">
      <span class="line line-chinchilla">
        <span class="char" style="animation-delay: 0.1s">C</span><span class="char" style="animation-delay: 0.12s">h</span><span class="char" style="animation-delay: 0.14s">i</span><span class="char" style="animation-delay: 0.16s">n</span><span class="char" style="animation-delay: 0.18s">c</span><span class="char" style="animation-delay: 0.2s">h</span><span class="char" style="animation-delay: 0.22s">i</span><span class="char" style="animation-delay: 0.24s">l</span><span class="char" style="animation-delay: 0.26s">l</span><span class="char" style="animation-delay: 0.28s">a</span></span><span class="line-space"><span class="char" style="animation-delay: 0.3s">&nbsp;</span></span><span class="line line-design">
        <span class="char" style="animation-delay: 0.32s">D</span><span class="char" style="animation-delay: 0.34s">e</span><span class="char" style="animation-delay: 0.36s">s</span><span class="char" style="animation-delay: 0.38s">i</span><span class="char" style="animation-delay: 0.4s">g</span><span class="char" style="animation-delay: 0.42s">n</span>
      </span>
    </h1>
    <p class="hero-subtitle">Where craftsmanship meets technology</p>
  </section>

  <!-- Marquee Section -->
  <section class="marquee-section">
    <div class="marquee-container">
      <div class="marquee-track">
        <div class="marquee-card" data-project="ids-pavilion">
          <img loading="lazy" decoding="async" src="images/ids-pavilion/IDS%20Pavilion.jpg" alt="IDS Pavilion">
        </div>
        <div class="marquee-card" data-project="tiny-house">
          <img loading="lazy" decoding="async" src="images/tiny-house/exterior.jpg" alt="Tiny House Exterior">
        </div>
        <div class="marquee-card" data-project="ids-pavilion">
          <img loading="lazy" decoding="async" src="images/ids-pavilion/IDS%20Canopy.jpg" alt="IDS Canopy">
        </div>
        <div class="marquee-card" data-project="tiny-house">
          <img loading="lazy" decoding="async" src="images/tiny-house/kitchen.jpg" alt="Tiny House Kitchen">
        </div>
        <div class="marquee-card" data-project="ids-pavilion">
          <img loading="lazy" decoding="async" src="images/ids-pavilion/IDS%20Counter.jpg" alt="IDS Counter">
        </div>
        <div class="marquee-card" data-project="tiny-house">
          <img loading="lazy" decoding="async" src="images/tiny-house/interior-1.jpg" alt="Tiny House Interior">
        </div>
        <div class="marquee-card" data-project="ids-pavilion">
          <img loading="lazy" decoding="async" src="images/ids-pavilion/IDS%20Basket%20Texture.jpg" alt="IDS Basket Texture">
        </div>
        <div class="marquee-card" data-project="ids-pavilion">
          <img loading="lazy" decoding="async" src="images/ids-pavilion/IDS%20Flame%20Texture.jpg" alt="IDS Flame Texture">
        </div>
      </div>
      <div class="marquee-track">
        <div class="marquee-card" data-project="ids-pavilion">
          <img loading="lazy" decoding="async" src="images/ids-pavilion/IDS%20Pavilion.jpg" alt="IDS Pavilion">
        </div>
        <div class="marquee-card" data-project="tiny-house">
          <img loading="lazy" decoding="async" src="images/tiny-house/exterior.jpg" alt="Tiny House Exterior">
        </div>
        <div class="marquee-card" data-project="ids-pavilion">
          <img loading="lazy" decoding="async" src="images/ids-pavilion/IDS%20Canopy.jpg" alt="IDS Canopy">
        </div>
        <div class="marquee-card" data-project="tiny-house">
          <img loading="lazy" decoding="async" src="images/tiny-house/kitchen.jpg" alt="Tiny House Kitchen">
        </div>
        <div class="marquee-card" data-project="ids-pavilion">
          <img loading="lazy" decoding="async" src="images/ids-pavilion/IDS%20Counter.jpg" alt="IDS Counter">
        </div>
        <div class="marquee-card" data-project="tiny-house">
          <img loading="lazy" decoding="async" src="images/tiny-house/interior-1.jpg" alt="Tiny House Interior">
        </div>
        <div class="marquee-card" data-project="ids-pavilion">
          <img loading="lazy" decoding="async" src="images/ids-pavilion/IDS%20Basket%20Texture.jpg" alt="IDS Basket Texture">
        </div>
        <div class="marquee-card" data-project="ids-pavilion">
          <img loading="lazy" decoding="async" src="images/ids-pavilion/IDS%20Flame%20Texture.jpg" alt="IDS Flame Texture">
        </div>
      </div>
    </div>
  </section>

  <!-- Intro Statement -->
  <section class="intro">
    <p class="intro-text">
      We are a creative studio that believes in the power of <span class="highlight">bold ideas</span> and <span class="highlight">meticulous craft</span>. Every project is an opportunity to push boundaries.
    </p>
  </section>

  <!-- Projects Ball-Pit -->
  <section class="projects" id="projects">
    <div id="ball-pit">
      <!-- bubbles injected by JS -->
    </div>
    <div class="projects-bar-wrap">
      <div class="projects-bottom">
        <div class="projects-hover-panel">
          <span class="projects-hover-title" id="projectsHoverTitle"></span>
          <p class="projects-hover-desc" id="projectsHoverDesc"></p>
        </div>
      </div>
    </div>
  </section>

  <!-- Interstitial Statement -->
  <section class="intro">
    <p class="intro-text">
      We welcome the opportunity to get involved <span class="highlight">early as possible</span> in your design process to help <span class="highlight">efficiently evolve</span> your design for manufacturing, while preserving its <span class="highlight">intent and vision</span>.
    </p>
  </section>

  <!-- Project Modal -->
  <div class="modal" id="projectModal" role="dialog" aria-label="Project details">
    <div class="modal-backdrop"></div>
    <div class="modal-frame">
      <div class="modal-content">
        <div class="modal-gallery">
          <div class="modal-gallery-images" id="modalImages">
            <!-- Images injected by JS -->
          </div>
        </div>
        <div class="modal-info">
          <!-- Scrollable area: all content except nav arrows -->
          <div class="modal-info-scroll">
            <span class="modal-category" id="modalCategory">Exhibition Design</span>
            <h2 class="modal-title" id="modalTitle">Project Title</h2>
            <p class="modal-description" id="modalDescription">Project description goes here.</p>
            <div class="modal-details">
              <div class="modal-detail-item">
                <h4>Year</h4>
                <p id="modalYear">2025</p>
              </div>
              <div class="modal-detail-item">
                <h4>Client</h4>
                <p id="modalClient">Client Name</p>
              </div>
              <div class="modal-detail-item">
                <h4>Services</h4>
                <p id="modalServices">Design, Development</p>
              </div>
              <div class="modal-detail-item">
                <h4>Status</h4>
                <p id="modalStatus">Completed</p>
              </div>
            </div>
            <div class="modal-external-media" id="modalExternalMedia">
              <!-- External media links injected by JS -->
            </div>
          </div>
          <!-- Sticky footer: nav arrows only -->
          <div class="modal-info-footer">
            <div class="modal-gallery-nav" id="galleryNav">
              <button class="modal-gallery-btn" id="prevBtn" aria-label="Previous image">&larr;</button>
              <div class="modal-gallery-dots" id="galleryDots">
                <!-- Dots injected by JS -->
              </div>
              <button class="modal-gallery-btn" id="nextBtn" aria-label="Next image">&rarr;</button>
            </div>
          </div>
        </div>
      </div>
      <button class="modal-close"><svg width="26" height="26" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg></button>
    </div>
  </div>

  <!-- About Section -->
  <section class="about" id="about">
    <div class="about-container">
      <div class="about-inner">
        <div class="about-text-section">
          <h2 class="about-title">About</h2>
          <div class="about-paragraphs">
            <p>Chinchilla Design is a multidisciplinary design and fabrication studio specializing in complex woodwork, digital fabrication, and precision craft.</p>
            <p>We operate at the intersection of advanced design technology and traditional making, helping designers and clients realize ambitious ideas that would otherwise be difficult to build. Contemporary design software and CNC technologies are expanding what is possible in wood and material fabrication and in turn, a new design language is emerging. To best explore this language, we believe it is best achieved through a company with a fluency in design and a deep understanding of material.</p>
            <p>Our role is often that of a bridge. We help connect design intent and physical execution, digital models and real materials, and creative ambition and manufacturing reality. We specialize in projects where standard fabrication methods fall short.</p>
            <p>We frequently work in a design-assist capacity, advising on material strategy, fabrication logic, and production methods early in the design process to ensure efficiency, feasibility, and design integrity.</p>
            <p>Based in Vancouver and working internationally, we partner with designers and clients who are pursuing technically ambitious, materially expressive, and carefully executed projects.</p>
          </div>
        </div>
        <div class="team-reveal-wrapper">
          <button class="team-reveal-btn" id="teamRevealBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <line x1="5" y1="12" x2="19" y2="12"></line>
              <polyline points="12 5 19 12 12 19"></polyline>
            </svg>
          </button>
          <span class="team-reveal-label">Meet the team</span>
        </div>
      </div>
      <div class="team-section" id="teamSection">
        <button class="team-close-btn" id="teamCloseBtn">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <line x1="19" y1="12" x2="5" y2="12"></line>
            <polyline points="12 19 5 12 12 5"></polyline>
          </svg>
        </button>
        <div class="team-track">
          <div class="team-card">
            <div class="team-image"><img loading="lazy" decoding="async" src="images/team/ben-hayward.jpg" alt="Ben Hayward" style="width:100%;height:100%;object-fit:cover;"></div>
            <div class="team-info">
              <h3 class="team-name">Ben Hayward</h3>
              <span class="team-role">Founder & Lead Designer</span>
              <p class="team-bio">Designer and builder specializing in digital fabrication and traditional craftsmanship. Graduate of Architectural Studies from Carleton University, known for innovative tiny house designs featured on HGTV's "Tiny House Big Living."</p>
            </div>
          </div>
          <div class="team-card">
            <div class="team-image" style="background: linear-gradient(135deg, #d0d0d0 0%, #b0b0b0 100%);"></div>
            <div class="team-info">
              <h3 class="team-name">Jamil Kabani</h3>
              <span class="team-role">Shop Manager</span>
              <p class="team-bio">Oversees day-to-day operations of the fabrication shop, managing CNC machinery, material sourcing, and production workflows. Ensures precision and quality in every piece.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="contact" id="contact">
    <div class="contact-main">

      <!-- Calendar — clickable, stays fixed on desktop, slides on mobile -->
      <div class="contact-calendar-wrap" id="contactCalendar" title="Click to get in touch">
        <div class="cal-grid" id="calGrid">
          <!-- 35 dots injected by JS -->
        </div>
      </div>

      <!-- Sliding panels: default content + CTA -->
      <div class="contact-content-wrap">

        <!-- Default get in touch content -->
        <div class="contact-default" id="contactDefault">
          <h2 class="contact-title">Get in touch</h2>
          <p class="contact-subtitle">Arrange for a call to discuss your next project or to stop in to visit our North Vancouver studio</p>
          <a href="mailto:contact@chinchilla.design" class="contact-email">contact@chinchilla.design</a>
        </div>

        <!-- CTA panel — revealed when calendar is clicked -->
        <div class="contact-cta" id="contactCta">
          <h2 class="footer-cta-title">What should we make today?</h2>
          <a href="mailto:contact@chinchilla.design" class="footer-cta-btn">Book an Appointment</a>
        </div>

      </div>

    </div>
  </section>

  <!-- Footer -->
  <footer id="siteFooter">
    <div class="footer-grid">
      <div class="footer-brand">
        <h2>Chinchilla<br>Design</h2>
        <p>A creative studio focused on interior design, digital fabrication, and art direction. Based in Vancouver.</p>
      </div>
      <div class="footer-col">
        <h4>Contact</h4>
        <ul>
          <li>
            <a href="https://instagram.com/benhaywarddesign" target="_blank" style="display: inline-flex; align-items: center; gap: 10px; font-size: 18px;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 22px; height: 22px;">
                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                <path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
              </svg>
              Instagram
            </a>
          </li>
          <li>
            <a href="mailto:contact@chinchilla.design" style="display: inline-flex; align-items: center; gap: 10px; font-size: 18px;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 22px; height: 22px;">
                <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path>
                <polyline points="22,6 12,13 2,6"></polyline>
              </svg>
              contact@chinchilla.design
            </a>
          </li>
          <li id="footer-phone"></li>
        </ul>
      </div>
    </div>
    <div class="footer-bottom">
      <span>&copy; 2026 Chinchilla Design</span>
      <span>Vancouver, BC</span>
    </div>
  </footer>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
  <script>
    // ── Ball-pit Projects ──────────────────────────────────────────────
    window.addEventListener('load', function () {
      const PIT = document.getElementById('ball-pit');
      if (!PIT || typeof Matter === 'undefined') return;

      const PROJECTS = [
        { key: 'ids-pavilion', title: 'IDS Pavilion',   photo: 'images/ids-pavilion/IDS%20Pavilion.jpg', desc: 'A woven-texture pavilion for the 2025 Interior Design Show, merging traditional craft with CNC fabrication.' },
        { key: 'tiny-house',   title: 'Tiny House',      photo: 'images/tiny-house/exterior.jpg',         desc: 'Every surface CNC-milled from sustainable plywood — a fully functional tiny house as seen on HGTV.' },
        { key: 'wall-art',     title: 'Wall Art',        photo: 'images/wall-art/front.jpg',              desc: 'Sculptural cedar wall piece with burl inlays, shaped parametrically and finished by hand.' },
        { key: 'chair',        title: 'Chair',           photo: 'images/chair/installed.jpg',             desc: 'Solid white oak dining chair with a hand-shaped wraparound back and cognac leather seat.' },
        { key: 'sage-hayward', title: 'Winery Branding', photo: 'images/sage-hayward/sign.jpg',           desc: 'Full brand identity for a Gulf Islands boutique vineyard — signage, labels, packaging, and print.' }
      ];

      const { Engine, Runner, Bodies, Body, Events, World, Mouse, MouseConstraint } = Matter;

      const isMobile = window.innerWidth < 768;
      const W     = PIT.offsetWidth;
      const R     = Math.min(Math.floor(W / 5.2), isMobile ? 90 : 145);
      const ER    = Math.round(R * 1.7);    // expanded physics + visual radius
      const D     = R * 2;
      const PIT_H = R * 2.5;
      PIT.style.height    = PIT_H + 'px';
      PIT.style.minHeight = '0';
      PIT.style.overflow  = 'visible';

      // Distance from page top to pit top — used to place ceiling wall
      const pitPageTop = PIT.getBoundingClientRect().top + window.scrollY;

      // ── Engine
      const engine = Engine.create({ gravity: { x: 0, y: 1.6 } });
      const world  = engine.world;

      // ── Static boundaries
      const T = 80;
      // Ceiling is positioned at the very top of the page in physics space
      // (physics y=0 is pit top, page top is pitPageTop px above that)
      const ceilY = -pitPageTop;
      World.add(world, [
        // floor
        Bodies.rectangle(W/2,       PIT_H + T/2,  W*4,    T,          { isStatic:true, restitution:0.35, friction:0.4 }),
        // left wall
        Bodies.rectangle(-T/2,      PIT_H/2,       T,      PIT_H*6,   { isStatic:true, restitution:0.25, friction:0.05 }),
        // right wall
        Bodies.rectangle(W+T/2,     PIT_H/2,       T,      PIT_H*6,   { isStatic:true, restitution:0.25, friction:0.05 }),
        // ceiling at page top — tall enough to catch any upward throw
        Bodies.rectangle(W/2,       ceilY - T/2,   W*4,    T,          { isStatic:true, restitution:0.4,  friction:0.05 }),
      ]);

      // ── Bodies
      const dropX = [0.15, 0.35, 0.55, 0.75, 0.45];
      const dropY = [R*0.6, R*1.5, R*0.3, R*1.2, R*2.2];
      const bodies = PROJECTS.map((p, i) =>
        Bodies.circle(dropX[i]*W, dropY[i], R, {
          restitution:0.4, friction:0.04, frictionAir:0.022, density:0.003, label:p.key
        })
      );
      World.add(world, bodies);

      // Track which body is currently scaled up for hover
      let expandedIdx = -1;
      // physicsExpanded[i] = true when body[i] has been scaled up in Matter.
      // Guards against double-scaling on rapid mouseenter/leave.
      const physicsExpanded = new Array(PROJECTS.length).fill(false);
      const EXPAND_SCALE = ER / R;

      // ── Info bar references & typing helpers
      const projectsSection = document.getElementById('projects');
      const hoverTitleEl    = document.getElementById('projectsHoverTitle');
      const hoverDescEl     = document.getElementById('projectsHoverDesc');
      const pill            = document.querySelector('.projects-bottom');
      let   typingTimers    = [];

      function clearTyping() {
        typingTimers.forEach(t => clearTimeout(t));
        typingTimers = [];
        if (hoverTitleEl) hoverTitleEl.textContent = '';
        if (hoverDescEl)  hoverDescEl.textContent  = '';
      }

      function typeText(el, text, delayMs) {
        let i = 0;
        function tick() {
          if (i > text.length) return;
          el.textContent = text.slice(0, i);
          i++;
          if (i <= text.length) typingTimers.push(setTimeout(tick, delayMs));
        }
        tick();
      }

      // ── DOM bubbles
      const bubbleEls = PROJECTS.map((p, i) => {
        const el = document.createElement('div');
        el.className = 'bubble';
        el.dataset.project = p.key;
        el.style.width  = D + 'px';
        el.style.height = D + 'px';
        el.style.left   = (dropX[i]*W - R) + 'px';
        el.style.top    = (dropY[i] - R) + 'px';
        el.innerHTML = `
          <img class="bubble-photo" src="${p.photo}" alt="${p.title}" draggable="false">
          <div class="bubble-title-bg"></div>
          <div class="bubble-title">${p.title}</div>
          <div class="bubble-card">
            <div class="bubble-card-title">${p.title}</div>
            <div class="bubble-card-desc">${p.desc}</div>
            <span class="bubble-card-open">View project ↗</span>
          </div>`;
        PIT.appendChild(el);
        return el;
      });

      // Max speed cap — prevents balls escaping through walls at high velocity
      const MAX_SPEED = 28;

      Events.on(engine, 'afterUpdate', () => {
        bodies.forEach((b, i) => {
          // Cap velocity
          const spd = Math.sqrt(b.velocity.x*b.velocity.x + b.velocity.y*b.velocity.y);
          if (spd > MAX_SPEED) Body.setVelocity(b, { x: b.velocity.x*MAX_SPEED/spd, y: b.velocity.y*MAX_SPEED/spd });
          // Anchor is always R — visual expansion uses CSS transform, not left/top shift
          bubbleEls[i].style.left = (b.position.x - R) + 'px';
          bubbleEls[i].style.top  = (b.position.y - R) + 'px';
        });
      });

      Runner.run(Runner.create(), engine);

      // ── Mouse constraint
      // Mouse.create(PIT) gives coords relative to PIT's top-left.
      // We also need to tell Matter to subtract the PIT's page offset
      // so that when the page is scrolled, coordinates stay correct.
      const mouse = Mouse.create(PIT);

      // Strip Matter's own wheel/touch listeners — they break page scroll
      mouse.element.removeEventListener('mousewheel',    mouse.mousewheel);
      mouse.element.removeEventListener('DOMMouseScroll',mouse.mousewheel);
      mouse.element.removeEventListener('touchstart',    mouse.mousedown);
      mouse.element.removeEventListener('touchmove',     mouse.mousemove);
      mouse.element.removeEventListener('touchend',      mouse.mouseup);

      const mc = MouseConstraint.create(engine, {
        mouse,
        constraint: { stiffness: 0.06, damping: 0.0, render: { visible: false } }
      });
      World.add(world, mc);

      // Translate raw page-coord mouse events → PIT-local coords for Matter
      function pitLocal(clientX, clientY) {
        const rect = PIT.getBoundingClientRect();
        return { x: clientX - rect.left, y: clientY - rect.top };
      }

      // Desktop mouse — fully manual so offset is always correct
      PIT.addEventListener('mousedown', e => {
        const p = pitLocal(e.clientX, e.clientY);
        mouse.position.x = p.x; mouse.position.y = p.y;
        mouse.mousedownPosition.x = p.x; mouse.mousedownPosition.y = p.y;
        mouse.button = 0;
        Events.trigger(mc, 'mousedown', { mouse });
      });
      PIT.addEventListener('mousemove', e => {
        const p = pitLocal(e.clientX, e.clientY);
        mouse.position.x = p.x; mouse.position.y = p.y;
        Events.trigger(mc, 'mousemove', { mouse });
      });
      PIT.addEventListener('mouseup', e => {
        const p = pitLocal(e.clientX, e.clientY);
        mouse.position.x = p.x; mouse.position.y = p.y;
        mouse.button = -1;
        Events.trigger(mc, 'mouseup', { mouse });
      });

      // Touch — manual feed; only block scroll when a ball is grabbed
      let touchGrabbed = false;
      let touchStartPos = null;
      let touchMoved = false;

      PIT.addEventListener('touchstart', e => {
        const t = e.touches[0];
        const p = pitLocal(t.clientX, t.clientY);
        touchStartPos = { x: t.clientX, y: t.clientY };
        touchMoved = false;

        // Hit-test against physics bodies (use actual current radius)
        touchGrabbed = bodies.some((b, i) => {
          const dx = b.position.x - p.x, dy = b.position.y - p.y;
          const cr = physicsExpanded[i] ? ER : R;
          return Math.sqrt(dx*dx + dy*dy) < cr + 12;
        });

        if (touchGrabbed) {
          mouse.position.x = p.x; mouse.position.y = p.y;
          mouse.mousedownPosition.x = p.x; mouse.mousedownPosition.y = p.y;
          mouse.button = 0;
          Events.trigger(mc, 'mousedown', { mouse });
        }
      }, { passive: true });

      PIT.addEventListener('touchmove', e => {
        const t = e.touches[0];
        if (touchStartPos) {
          const dx = t.clientX - touchStartPos.x, dy = t.clientY - touchStartPos.y;
          if (dx*dx + dy*dy > 25) touchMoved = true;
        }
        if (!touchGrabbed) return;           // not on a ball → let page scroll
        e.preventDefault();                  // block scroll while dragging ball
        const p = pitLocal(t.clientX, t.clientY);
        mouse.position.x = p.x; mouse.position.y = p.y;
        Events.trigger(mc, 'mousemove', { mouse });
      }, { passive: false });                // must be non-passive to call preventDefault

      PIT.addEventListener('touchend', e => {
        if (touchGrabbed) {
          const t = e.changedTouches[0];
          const p = pitLocal(t.clientX, t.clientY);
          mouse.position.x = p.x; mouse.position.y = p.y;
          mouse.button = -1;
          Events.trigger(mc, 'mouseup', { mouse });

          // Tap (no significant movement) → open modal
          if (!touchMoved) {
            const key = bodies.reduce((hit, b, i) => {
              if (hit) return hit;
              const dx = b.position.x - p.x, dy = b.position.y - p.y;
              const cr = physicsExpanded[i] ? ER : R;
              return Math.sqrt(dx*dx + dy*dy) < cr + 12 ? PROJECTS[i].key : null;
            }, null);
            if (key) setTimeout(() => openModal(key, R), 10);
          }
        }
        touchGrabbed = false;
        touchStartPos = null;
      }, { passive: true });

      // ── Desktop drag vs click
      let pointerDown = null, wasDrag = false;
      PIT.addEventListener('mousedown', e => { pointerDown = { x:e.clientX, y:e.clientY }; wasDrag = false; }, true);
      PIT.addEventListener('mousemove', e => {
        if (!pointerDown) return;
        const dx = e.clientX - pointerDown.x, dy = e.clientY - pointerDown.y;
        if (dx*dx + dy*dy > 25) wasDrag = true;
      }, true);
      PIT.addEventListener('mouseup', () => {
        pointerDown = null;
        // Reset wasDrag after the click event fires (setTimeout 0 puts it at end
        // of this event-loop turn) so the click handler still sees wasDrag=true
        // and correctly suppresses the modal, but subsequent hovers work normally.
        setTimeout(() => { wasDrag = false; }, 0);
      }, true);

      // ── Expand / collapse — scales the physics body so Matter pushes neighbours
      function expandBubble(idx) {
        if (expandedIdx === idx) return;

        // Inline-collapse previous bubble without touching the info bar —
        // we're about to immediately replace the content, so avoiding the
        // remove/add flicker on the pill and the hovered class.
        if (expandedIdx !== -1) {
          const prev = expandedIdx;
          expandedIdx = -1;
          if (physicsExpanded[prev]) {
            Body.scale(bodies[prev], 1 / EXPAND_SCALE, 1 / EXPAND_SCALE);
            physicsExpanded[prev] = false;
          }
          bubbleEls[prev].classList.remove('expanded');
          bubbleEls[prev].style.transition = 'transform 0.45s cubic-bezier(0.16,1,0.3,1)';
          bubbleEls[prev].style.transform  = 'scale(1)';
        }

        expandedIdx = idx;
        // Scale up physics body only once — guard prevents compounding on rapid hover
        if (!physicsExpanded[idx]) {
          Body.scale(bodies[idx], EXPAND_SCALE, EXPAND_SCALE);
          physicsExpanded[idx] = true;
        }
        const el = bubbleEls[idx];
        el.classList.add('expanded');
        el.style.transition = 'transform 0.5s cubic-bezier(0.16,1,0.3,1)';
        el.style.transform  = 'scale(' + EXPAND_SCALE + ')';

        // Measure the pill's natural height for this project's content,
        // then animate to that height so the full description is always visible.
        const p = PROJECTS[idx];
        clearTyping();
        if (pill) {
          hoverTitleEl.textContent = p.title;
          hoverDescEl.textContent  = p.desc;
          pill.style.transition = 'none';
          pill.style.height     = 'auto';
          const naturalH = Math.max(pill.scrollHeight, 44);
          hoverTitleEl.textContent = '';
          hoverDescEl.textContent  = '';
          pill.style.height = '44px';
          pill.offsetHeight;           // force reflow so transition fires
          pill.style.transition = '';  // restore CSS transition
          pill.style.height     = naturalH + 'px';
        }
        if (projectsSection) projectsSection.classList.add('hovered');
        if (hoverTitleEl) typeText(hoverTitleEl, p.title, 8);
        if (hoverDescEl)  typeText(hoverDescEl,  p.desc,  8);
      }

      function collapseBubble(idx) {
        if (idx < 0 || idx >= bubbleEls.length) return;
        // Only manage the info bar / pill if this bubble is still the active one.
        // If expandBubble() already transferred ownership to a new bubble, the
        // delayed timer should leave the bar alone.
        const isStillActive = (expandedIdx === idx);
        if (isStillActive) expandedIdx = -1;

        if (physicsExpanded[idx]) {
          Body.scale(bodies[idx], 1 / EXPAND_SCALE, 1 / EXPAND_SCALE);
          physicsExpanded[idx] = false;
        }
        const el = bubbleEls[idx];
        el.classList.remove('expanded');
        el.style.transition = 'transform 0.45s cubic-bezier(0.16,1,0.3,1)';
        el.style.transform  = 'scale(1)';

        if (isStillActive) {
          clearTyping();
          if (projectsSection) projectsSection.classList.remove('hovered');
          if (pill) pill.style.height = '44px';
        }
      }

      // ── Hover expand (desktop only — no hover on mobile)
      // collapseTimers: small grace period before collapsing, prevents physics
      // micro-jitter from bouncing enter/leave and causing a glitch loop.
      const collapseTimers = new Array(PROJECTS.length).fill(null);

      bubbleEls.forEach((el, idx) => {
        if (!isMobile) {
          el.addEventListener('mouseenter', () => {
            // Cancel all pending collapse timers — not just this bubble's —
            // so a delayed collapse from a previous bubble can't interrupt the new expansion.
            collapseTimers.forEach((t, i) => { if (t) { clearTimeout(t); collapseTimers[i] = null; } });
            if (wasDrag || mc.body) return;
            expandBubble(idx);
          });
          el.addEventListener('mouseleave', () => {
            collapseTimers[idx] = setTimeout(() => {
              collapseTimers[idx] = null;
              collapseBubble(idx);
            }, 80);
          });
        }
        el.addEventListener('click', () => {
          if (wasDrag) return;
          openModal(el.dataset.project, R);
        });
      });

      // Collapse if user starts dragging
      Events.on(mc, 'startdrag', () => { if (expandedIdx !== -1) collapseBubble(expandedIdx); });

      document.addEventListener('ballpit:open', e => openModal(e.detail));
    });

    // Parallax Dot Grid — with upward drift and cursor repulsion
    (function() {
      const canvas = document.getElementById('dotGrid');
      const ctx = canvas.getContext('2d');

      const layer = { spacing: 28, radius: 1.2, opacity: 0.12, speed: 0.15, color: '255, 255, 255' };

      // Drift: dots move upward at this many px per second
      const DRIFT_SPEED = 12;

      // Repulsion: dots within this radius are pushed away from cursor
      const REPEL_RADIUS = 130;
      const REPEL_STRENGTH = 45;

      let width, height;
      let scrollY = 0;
      let driftY = 0;       // autonomous upward drift accumulator
      let lastTime = null;

      // Smoothed cursor position (lerped toward raw mouse)
      let mouseX = -9999, mouseY = -9999;
      let cursorX = -9999, cursorY = -9999;

      document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
      });

      window.addEventListener('scroll', () => { scrollY = window.scrollY; }, { passive: true });

      function resize() {
        const dpr = window.devicePixelRatio || 1;
        width = window.innerWidth;
        height = window.innerHeight;
        canvas.width = width * dpr;
        canvas.height = height * dpr;
        canvas.style.width = width + 'px';
        canvas.style.height = height + 'px';
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      }

      function draw(timestamp) {
        // Delta time in seconds, capped to avoid jumps after tab switch
        if (lastTime === null) lastTime = timestamp;
        const dt = Math.min((timestamp - lastTime) / 1000, 0.05);
        lastTime = timestamp;

        // Advance drift and wrap within one grid cell
        driftY = (driftY + DRIFT_SPEED * dt) % layer.spacing;

        // Smoothly lerp cursor toward mouse (avoids jitter)
        cursorX += (mouseX - cursorX) * 0.12;
        cursorY += (mouseY - cursorY) * 0.12;

        ctx.clearRect(0, 0, width, height);

        // Combined vertical offset: scroll parallax + upward drift
        const baseOffsetY = (-(scrollY * layer.speed) - driftY) % layer.spacing;

        ctx.fillStyle = `rgba(${layer.color}, ${layer.opacity})`;
        ctx.beginPath();

        const startX = -layer.spacing;
        const startY = baseOffsetY - layer.spacing;
        const endX = width + layer.spacing;
        const endY = height + layer.spacing;

        const repelR2 = REPEL_RADIUS * REPEL_RADIUS;

        for (let gx = startX; gx < endX; gx += layer.spacing) {
          for (let gy = startY; gy < endY; gy += layer.spacing) {

            // Repulsion: push dot away from cursor
            const dx = gx - cursorX;
            const dy = gy - cursorY;
            const dist2 = dx * dx + dy * dy;

            let px = gx, py = gy;
            if (dist2 < repelR2 && dist2 > 0) {
              const dist = Math.sqrt(dist2);
              // Falloff: full strength at centre, zero at edge
              const force = REPEL_STRENGTH * (1 - dist / REPEL_RADIUS);
              px += (dx / dist) * force;
              py += (dy / dist) * force;
            }

            ctx.moveTo(px + layer.radius, py);
            ctx.arc(px, py, layer.radius, 0, Math.PI * 2);
          }
        }

        ctx.fill();
        requestAnimationFrame(draw);
      }

      window.addEventListener('resize', resize);
      resize();
      requestAnimationFrame(draw);
    })();

    // Custom Cursor
    const cursor = document.querySelector('.cursor');
    let mouseX = 0, mouseY = 0;
    let cursorX = 0, cursorY = 0;

    document.addEventListener('mousemove', (e) => {
      mouseX = e.clientX;
      mouseY = e.clientY;
    });

    // Smooth cursor interpolation using lerp
    function lerp(start, end, factor) {
      return start + (end - start) * factor;
    }

    function animateCursor() {
      cursorX = lerp(cursorX, mouseX, 0.15);
      cursorY = lerp(cursorY, mouseY, 0.15);
      cursor.style.left = cursorX + 'px';
      cursor.style.top = cursorY + 'px';
      requestAnimationFrame(animateCursor);
    }
    animateCursor();

    // Cursor hover effect
    const hoverElements = document.querySelectorAll('a, button, .project-item, .bubble, .marquee-card, .team-card');
    hoverElements.forEach(el => {
      el.addEventListener('mouseenter', () => cursor.classList.add('hover'));
      el.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
    });

    // Hide cursor when leaving window
    document.addEventListener('mouseleave', () => {
      cursor.style.opacity = '0';
    });
    document.addEventListener('mouseenter', () => {
      cursor.style.opacity = '1';
    });

    // Phone number anti-scrape: assembled at runtime via JS
    // (must run before menu JS so the phone link is included in socialLinks NodeList)
    (function() {
      var p = ['6','0','4','4','4','2','0','0','6','9'];
      var n = '(' + p[0]+p[1]+p[2] + ') ' + p[3]+p[4]+p[5] + '-' + p[6]+p[7]+p[8]+p[9];
      var t = '+1' + p.join('');

      // Menu phone link
      var menuEl = document.getElementById('menu-phone');
      if (menuEl) {
        var a1 = document.createElement('a');
        a1.href = 'tel:' + t;
        a1.className = 'staggered-social-link';
        a1.textContent = n;
        menuEl.parentNode.replaceChild(a1, menuEl);
      }

      // Footer phone link
      var footerEl = document.getElementById('footer-phone');
      if (footerEl) {
        var a2 = document.createElement('a');
        a2.href = 'tel:' + t;
        a2.setAttribute('style', 'display: inline-flex; align-items: center; gap: 10px; font-size: 18px;');
        a2.innerHTML = '<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" style="width: 22px; height: 22px;"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg> ' + n;
        footerEl.appendChild(a2);
      }
    })();

    // Staggered Menu
    const menuToggle = document.getElementById('menuToggle');
    const prelayer1 = document.getElementById('prelayer1');
    const prelayer2 = document.getElementById('prelayer2');
    const menuPanel = document.getElementById('menuPanel');
    const barH = menuToggle.querySelector('.bar-h');
    const barV = menuToggle.querySelector('.bar-v');
    const itemLabels = document.querySelectorAll('.staggered-item-label');
    const socialLinks = document.querySelectorAll('.staggered-social-link');
    let menuOpen = false;
    let menuAnimating = false;

    function playOpen() {
      if (menuAnimating) return;
      menuAnimating = true;
      menuOpen = true;
      menuToggle.classList.add('open');
      menuPanel.classList.add('open');
      menuToggle.setAttribute('aria-label', 'Close menu');

      const tl = gsap.timeline({
        defaults: { ease: 'power4.inOut' },
        onComplete: () => { menuAnimating = false; }
      });

      // Icon: plus → X
      tl.to(barH, { rotation: 45, duration: 0.4 }, 0);
      tl.to(barV, { rotation: -45, duration: 0.4 }, 0);

      // Pre-layers slide in
      tl.to(prelayer1, { xPercent: 0, duration: 0.6 }, 0);
      tl.to(prelayer2, { xPercent: 0, duration: 0.6 }, 0.08);

      // Main panel slides in
      tl.to(menuPanel, { xPercent: 0, duration: 0.6 }, 0.16);

      // Item labels animate up
      tl.to(itemLabels, {
        y: 0,
        rotation: 0,
        duration: 0.7,
        ease: 'power3.out',
        stagger: 0.06
      }, 0.4);

      // Social links fade in
      tl.to(socialLinks, {
        opacity: 1,
        duration: 0.4,
        stagger: 0.05
      }, 0.6);
    }

    function playClose() {
      if (menuAnimating) return;
      menuAnimating = true;
      menuOpen = false;
      menuToggle.classList.remove('open');
      menuToggle.setAttribute('aria-label', 'Open menu');

      const tl = gsap.timeline({
        defaults: { ease: 'power4.inOut' },
        onComplete: () => {
          menuAnimating = false;
          menuPanel.classList.remove('open');
          // Reset item labels for next open
          gsap.set(itemLabels, { y: '140%', rotation: 10 });
          gsap.set(socialLinks, { opacity: 0 });
        }
      });

      // Icon: X → plus
      tl.to(barH, { rotation: 0, duration: 0.4 }, 0);
      tl.to(barV, { rotation: 90, duration: 0.4 }, 0);

      // All layers + panel slide out simultaneously
      tl.to(menuPanel, { xPercent: 100, duration: 0.5 }, 0);
      tl.to(prelayer2, { xPercent: 100, duration: 0.5 }, 0.05);
      tl.to(prelayer1, { xPercent: 100, duration: 0.5 }, 0.1);
    }

    // Set initial states
    gsap.set([prelayer1, prelayer2, menuPanel], { xPercent: 100 });
    gsap.set(barV, { rotation: 90 });
    gsap.set(itemLabels, { y: '140%', rotation: 10 });
    gsap.set(socialLinks, { opacity: 0 });

    menuToggle.addEventListener('click', (e) => {
      e.stopPropagation();
      if (menuOpen) playClose();
      else playOpen();
    });

    // Close menu when clicking outside panel
    document.addEventListener('click', (e) => {
      if (menuOpen && !menuPanel.contains(e.target) && !menuToggle.contains(e.target)) {
        playClose();
      }
    });

    // Escape key closes menu
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && menuOpen) playClose();
    });

    // Nav link click: close menu, scroll to section
    document.querySelectorAll('.staggered-item[data-nav]').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        const target = link.getAttribute('href');
        playClose();
        setTimeout(() => {
          document.querySelector(target).scrollIntoView({ behavior: 'smooth' });
        }, 500);
      });
    });

    // Sub-link click: close menu, scroll to section
    document.querySelectorAll('.staggered-sub-link[data-nav]').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        const target = link.getAttribute('href');
        playClose();
        setTimeout(() => {
          document.querySelector(target).scrollIntoView({ behavior: 'smooth' });
        }, 500);
      });
    });

    // Menu "Team" link: scroll to about + open team panel
    document.getElementById('menuTeamLink').addEventListener('click', (e) => {
      e.preventDefault();
      e.stopPropagation();
      playClose();
      setTimeout(() => {
        document.querySelector('#about').scrollIntoView({ behavior: 'smooth' });
        setTimeout(() => {
          aboutContainer.classList.add('show-team');
        }, 600);
      }, 500);
    });

    // Cursor hover effects on menu elements
    document.querySelectorAll('.staggered-toggle, .staggered-item, .staggered-social-link, .staggered-sub-link').forEach(el => {
      el.addEventListener('mouseenter', () => cursor.classList.add('hover'));
      el.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
    });

    // Team Section Reveal
    const teamRevealBtn = document.getElementById('teamRevealBtn');
    const teamCloseBtn = document.getElementById('teamCloseBtn');
    const aboutContainer = document.querySelector('.about-container');

    teamRevealBtn.addEventListener('click', () => {
      aboutContainer.classList.add('show-team');
    });

    teamCloseBtn.addEventListener('click', () => {
      aboutContainer.classList.remove('show-team');
    });

    // Add hover effect to team buttons
    [teamRevealBtn, teamCloseBtn].forEach(btn => {
      btn.addEventListener('mouseenter', () => cursor.classList.add('hover'));
      btn.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
    });

    // Project Data
    const projectsData = {
      'ids-pavilion': {
        title: 'IDS Pavilion',
        category: 'Design/Build',
        year: '2025',
        client: 'Interior Design Show',
        services: 'Spatial Design, Fabrication',
        status: 'Completed',
        description: 'A pavilion for IDS 2025 exploring the meeting point of traditional weaving and digital fabrication — CNC-milled panels arranged to create two distinct surface textures beneath a dramatic canopy structure.',
        images: [
          'images/ids-pavilion/IDS%20Pavilion.jpg',
          'images/ids-pavilion/IDS%20Canopy.jpg',
          'images/ids-pavilion/IDS%20Counter.jpg',
          'images/ids-pavilion/IDS%20Basket%20Texture.jpg',
          'images/ids-pavilion/IDS%20Flame%20Texture.jpg'
        ],
        imageCaptions: [
          'Full pavilion view at IDS 2025',
          'Canopy structure detail — CNC-milled slats in a radial arrangement',
          'Reception counter with integrated woven-panel facade',
          'Basket-weave texture panel — alternating raised and recessed strips',
          'Flame texture panel — flowing carved relief pattern'
        ],
        externalMedia: []
      },
      'tiny-house': {
        title: 'Tiny House',
        category: 'Design/Build',
        year: '2023',
        client: 'Research Project',
        services: 'Digital Fabrication, Interior Design, CNC Milling',
        status: 'Completed',
        description: 'Every curved surface — kitchen counter, ceiling forms, cabinetry — was designed parametrically and CNC-milled from sustainable plywood. Custom tilework, a laser-cut door panel, and integrated storage make the most of a compact 200 sq ft footprint.',
        images: [
          'images/tiny-house/exterior.jpg',
          'images/tiny-house/walkthrough.mp4',
          'images/tiny-house/kitchen.jpg',
          'images/tiny-house/hallway.jpg',
          'images/tiny-house/counter.jpg'
        ],
        imageCaptions: [
          'Exterior — cedar cladding and custom laser-cut entry door',
          'Interior walkthrough',
          'Kitchen — CNC-milled plywood counter with organic flowing profile',
          'Hallway looking toward the living area',
          'Counter detail — seamless CNC joinery and integrated sink'
        ],
        externalMedia: [
          { title: 'Carleton News: Olympic Hopeful Builds Unique Tiny House', url: 'https://carleton.ca/news/story/olympic-hopeful-builds-unique-tiny-house/' },
          { title: 'Indo Teak Design: The Tiny House Project', url: 'https://indoteakdesign.com/blogs/projects/the-tiny-house-project-by-ben-hayward' },
          { title: 'SAB Magazine: The Best Tiny House We\'ve Seen So Far', url: 'https://sabmagazine.com/the-best-tiny-house-weve-seen-so-far/' },
          { title: 'CSALT Architecture: Prefabrication Projects', url: 'https://www.csaltarchitecture.com/prefabrication-projects/tiny-house' }
        ]
      },
      'wall-art': {
        title: 'Wall Art',
        category: 'Product Design',
        year: '2026',
        client: 'Private',
        services: 'CNC Milling, Woodworking, Product Design',
        status: 'Completed',
        description: 'Laminated cedar with burl wood inlays, CNC-milled into flowing topographic relief. Digital precision in the toolpaths, hand-finishing in the final surface — the two approaches are left visible in the finished piece.',
        images: [
          'images/wall-art/detail.jpg',
          'images/wall-art/front.jpg',
          'images/wall-art/workshop.jpg',
          'images/wall-art/angle.jpg'
        ],
        imageCaptions: [
          'Surface detail — burl inlay against the milled cedar grain',
          'Installed view — full piece showing topographic relief profile',
          'In the shop during finishing — toolpath lines still visible',
          'Angled view highlighting the depth of the carved relief'
        ],
        externalMedia: []
      },
      'chair': {
        title: 'Chair',
        category: 'Product Design',
        year: '2025',
        client: 'Private',
        services: 'Furniture Design, Woodworking, Upholstery',
        status: 'Completed',
        description: 'Solid white oak dining chair with a continuous wraparound backrest shaped by hand and spokeshave. Angled rear legs echo the sweep of the back. Upholstered in cognac leather, installed in a private island residence on the BC coast.',
        images: [
          'images/chair/detail.jpg',
          'images/chair/installed.jpg',
          'images/chair/room.jpg'
        ],
        imageCaptions: [
          'Chair detail — hand-shaped wraparound back transitioning to armrest',
          'Chairs around the dining table — private island residence, BC coast',
          'Full dining room — eight chairs with live-edge white oak table'
        ],
        externalMedia: []
      },
      'sage-hayward': {
        title: 'Winery Branding',
        category: 'Brand Identity',
        year: '2024',
        client: 'Sage Hayward Vineyards',
        services: 'Brand Identity, Signage, Print, Packaging',
        status: 'Completed',
        description: 'Complete brand identity for a boutique Gulf Islands vineyard. The visual language draws from the land — hand-carved wooden signage, organic wave patterns, a bull horn motif, and custom wine labels that carry the same craft into every touchpoint.',
        images: [
          'images/sage-hayward/sign.jpg',
          'images/sage-hayward/tasting-room.jpg',
          'images/sage-hayward/bottles.jpg',
          'images/sage-hayward/menu.jpg'
        ],
        imageCaptions: [
          'Hand-carved exterior signage — wave-pattern relief in solid wood',
          'Tasting room interior with branded environmental graphics',
          'Wine bottle labels carrying the bull horn motif',
          'Menu design — print collateral using the full brand system'
        ],
        externalMedia: [
          { title: 'Nuvo Magazine: Saturna Island\'s Sage Hayward Vineyards', url: 'https://nuvomagazine.com/daily-edit/saturna-islands-sage-hayward-vineyards' }
        ]
      }
    };

    // Modal Elements
    const modal = document.getElementById('projectModal');
    const modalBackdrop = modal.querySelector('.modal-backdrop');
    const modalClose = modal.querySelector('.modal-close');
    const modalImages = document.getElementById('modalImages');
    const galleryDots = document.getElementById('galleryDots');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const modalTitle = document.getElementById('modalTitle');
    const modalCategory = document.getElementById('modalCategory');
    const modalDescription = document.getElementById('modalDescription');
    const modalYear = document.getElementById('modalYear');
    const modalClient = document.getElementById('modalClient');
    const modalServices = document.getElementById('modalServices');
    const modalStatus = document.getElementById('modalStatus');
    const modalExternalMedia = document.getElementById('modalExternalMedia');

    let currentImageIndex = 0;
    let currentProject = null;
    // Open Modal
    function openModal(projectKey, bubbleRadius) {
      currentProject = projectsData[projectKey];
      currentImageIndex = 0;

      // Update content
      modalTitle.textContent = currentProject.title;
      modalCategory.textContent = currentProject.category;
      modalDescription.textContent = currentProject.description;
      modalYear.textContent = currentProject.year;
      modalClient.textContent = currentProject.client;
      modalServices.textContent = currentProject.services;
      modalStatus.textContent = currentProject.status;

      // Build gallery (support both images and videos)
      modalImages.innerHTML = currentProject.images.map((src, i) => {
        const isVideo = src.endsWith('.mp4') || src.endsWith('.webm') || src.endsWith('.mov');
        if (isVideo) {
          return `<video src="${src}" class="${i === 0 ? 'active' : ''}" autoplay loop muted playsinline></video>`;
        }
        return `<img src="${src}" alt="${currentProject.title}" class="${i === 0 ? 'active' : ''}">`;
      }).join('');

      // Build dots
      galleryDots.innerHTML = currentProject.images.map((_, i) =>
        `<button class="modal-gallery-dot ${i === 0 ? 'active' : ''}" data-index="${i}"></button>`
      ).join('');

      // Add dot listeners
      galleryDots.querySelectorAll('.modal-gallery-dot').forEach(dot => {
        dot.addEventListener('click', () => goToImage(parseInt(dot.dataset.index)));
      });

      // Show/hide nav if single image
      const hasMultiple = currentProject.images.length > 1;
      document.getElementById('galleryNav').style.display = hasMultiple ? 'flex' : 'none';
      prevBtn.style.display = hasMultiple ? 'flex' : 'none';
      nextBtn.style.display = hasMultiple ? 'flex' : 'none';
      galleryDots.style.display = hasMultiple ? 'flex' : 'none';

      // Build external media links
      if (currentProject.externalMedia && currentProject.externalMedia.length > 0) {
        modalExternalMedia.classList.add('has-links');
        modalExternalMedia.innerHTML = `
          <h4>External Media</h4>
          <div class="modal-external-links">
            ${currentProject.externalMedia.map(link => `
              <a href="${link.url}" target="_blank" rel="noopener noreferrer" class="modal-external-link">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <line x1="7" y1="17" x2="17" y2="7"></line>
                  <polyline points="7 7 17 7 17 17"></polyline>
                </svg>
                <span>${link.title}</span>
              </a>
            `).join('')}
          </div>
        `;
      } else {
        modalExternalMedia.classList.remove('has-links');
        modalExternalMedia.innerHTML = '';
      }

      // Show modal
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    // Close Modal
    function closeModal() {
      modal.classList.remove('active');
      document.body.style.overflow = '';
    }

    // Navigate Gallery
    function goToImage(index) {
      const media = modalImages.querySelectorAll('img, video');
      const dots = galleryDots.querySelectorAll('.modal-gallery-dot');

      if (media.length === 0) return;

      // Remove active from current
      media[currentImageIndex].classList.remove('active');
      dots[currentImageIndex].classList.remove('active');

      // Calculate new index with wrapping
      currentImageIndex = index;
      if (currentImageIndex < 0) currentImageIndex = media.length - 1;
      if (currentImageIndex >= media.length) currentImageIndex = 0;

      // Add active to new
      media[currentImageIndex].classList.add('active');
      dots[currentImageIndex].classList.add('active');

    }

    function nextImage() {
      goToImage(currentImageIndex + 1);
    }

    function prevImage() {
      goToImage(currentImageIndex - 1);
    }

    // Event Listeners — project-item (legacy) + bubble
    document.querySelectorAll('.project-item, .bubble').forEach(item => {
      const projectKey = item.dataset.project;
      item.addEventListener('click', () => openModal(projectKey));
    });

    // Marquee cards link to their respective projects
    document.querySelectorAll('.marquee-card').forEach(card => {
      card.style.cursor = 'none';
      card.addEventListener('click', () => openModal(card.dataset.project));
    });

    modalClose.addEventListener('click', closeModal);
    modalBackdrop.addEventListener('click', closeModal);
    prevBtn.addEventListener('click', prevImage);
    nextBtn.addEventListener('click', nextImage);
    modalImages.addEventListener('click', nextImage);

    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (!modal.classList.contains('active')) return;
      if (e.key === 'Escape') closeModal();
      if (e.key === 'ArrowLeft') prevImage();
      if (e.key === 'ArrowRight') nextImage();
    });

    // Add hover effect to modal buttons
    const modalButtons = modal.querySelectorAll('button');
    modalButtons.forEach(btn => {
      btn.addEventListener('mouseenter', () => cursor.classList.add('hover'));
      btn.addEventListener('mouseleave', () => cursor.classList.remove('hover'));
    });

  </script>

  <!-- Footer Calendar -->
  <script>
  (function () {
    var grid    = document.getElementById('calGrid');
    var calWrap = document.getElementById('contactCalendar');
    var section = document.getElementById('contact');

    function buildCalendar() {
      var now     = new Date();
      var todayMs = new Date(now.getFullYear(), now.getMonth(), now.getDate()).getTime();
      var first   = new Date(now.getFullYear(), now.getMonth(), 1);
      // Week starts Sunday
      var startOffset = first.getDay(); // 0 = Sun
      var start = new Date(first);
      start.setDate(start.getDate() - startOffset);

      grid.innerHTML = '';
      for (var i = 0; i < 35; i++) {
        var d = new Date(start.getFullYear(), start.getMonth(), start.getDate() + i);
        var dot = document.createElement('div');
        dot.className = 'cal-dot';

        if (d.getMonth() !== now.getMonth()) {
          dot.classList.add('cal-outside');
        } else {
          var dMs = d.getTime();
          if (dMs === todayMs)      dot.classList.add('cal-today');
          else if (dMs < todayMs)   dot.classList.add('cal-past');
          else                      dot.classList.add('cal-future');
        }
        grid.appendChild(dot);
      }
    }

    buildCalendar();

    // Toggle CTA panel when calendar is clicked
    calWrap.addEventListener('click', function () {
      section.classList.toggle('cta-active');
    });
  })();
  </script>
</body>
</html>
